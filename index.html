<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>KloudDisc - Neon Vinyl Store</title>
   
</head>
<body>
    <style>
.auth-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    font-family: 'Orbitron', sans-serif; /* Согласуем шрифт с хедером */
}

.auth-modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(10, 10, 26, 0.8); /* Цвет фона хедера */
}

.auth-modal-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(10, 10, 26, 0.9); /* Цвет фона хедера */
    padding: 30px;
    border-radius: 10px;
    width: 400px;
    border: 1px solid var(--neon-blue); /* Рамка как в хедере */
    box-shadow: 0 0 20px rgba(0, 240, 255, 0.3); /* Тень как в хедере */
}

.auth-modal-content {
    position: relative;
    padding: 20px;
}

/* Кнопка закрытия */
.auth-close-btn {
    position: absolute;
    top: -20px;
    right: -20px;
    background: none;
    border: none;
    color: var(--neon-blue); /* Неоновый синий */
    font-size: 24px;
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    text-align: center;
    line-height: 30px;
    border-radius: 50%;
    box-shadow: 0 0 10px rgba(0, 240, 255, 0.5);
    transition: color 0.2s, box-shadow 0.2s;
}

.auth-close-btn:hover {
    color: var(--neon-pink); /* Неоновый розовый при наведении */
    box-shadow: 0 0 15px var(--neon-pink);
}

/* Табы (Вход/Регистрация) */
.auth-tabs {
    display: flex;
    margin-bottom: 20px;
}

.auth-tab {
    padding: 10px 20px;
    background-color: rgba(255, 255, 255, 0.1); /* Как фон инпута в хедере */
    color: var(--text-color);
    border: none;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s, box-shadow 0.2s; /* добавил transition для box-shadow */
    border-radius: 5px 5px 0 0;
    flex: 1;
    text-align: center;
    font-family: 'Rajdhani', sans-serif; /*  шрифт инпута */
    border: 1px solid var(--neon-blue);
}

.auth-tab.active {
    background-color: var(--neon-pink);
    color: #111;
    box-shadow: 0 0 10px var(--neon-pink); /* Розовый при активации */
    border: 1px solid var(--neon-pink);
}

.auth-tab:hover {
    background-color: rgba(0, 240, 255, 0.1); /* Неоновый синий при наведении */
    color: var(--neon-blue);
}

/* Содержимое табов (Формы) */
.auth-tab-contents {
    /*  можно добавить рамку или фон */
}

.auth-tab-content {
    display: none;
}

.auth-tab-content.active {
    display: block;
}

/* Поля ввода */
.auth-tab-content input {
    display: block;
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border: none;
    background-color: rgba(255, 255, 255, 0.1); /* Как фон инпута в хедере */
    color: var(--text-color);
    border-radius: 5px;
    font-family: 'Rajdhani', sans-serif; /*  шрифт инпута */
    outline: none;
    border: 1px solid var(--neon-blue);
    transition: all 0.3s ease;
    box-shadow: 0 0 10px rgba(0, 240, 255, 0.3);
}

.auth-tab-content input:focus {
    box-shadow: 0 0 15px var(--neon-blue); /* Тень как у инпута в хедере */
}

/* Кнопки */
.auth-tab-content button {
    background-color: var(--neon-blue); /* Неоновый синий */
    color: #111;
    border: none;
    padding: 12px 25px;
    border-radius: 5px;
    cursor: pointer;
    font-family: 'Rajdhani', sans-serif;
    font-weight: bold;
    transition: background-color 0.2s, color 0.2s, box-shadow 0.2s;
    width: 100%;
    box-shadow: 0 0 10px rgba(0, 240, 255, 0.5);
}

.auth-tab-content button:hover {
    background-color: var(--neon-pink); /* Неоновый розовый при наведении */
    color: #111;
    box-shadow: 0 0 15px var(--neon-pink);
}

/* Сообщения об ошибках */
.auth-error {
    color: #FF4136; /* Красный цвет для ошибок */
    margin-top: 10px;
    text-align: center;
}


.profile-btn img {
    width: 50px;
    height: 50px;
}

.profile-btn{
    margin: 0 40px 0 40px;
    filter: drop-shadow(0 0 5px var(--neon-pink));
    transition: all 0.3s ease;
    background-color: #0a0a1a;
    border-radius: 55%;
}

        .profile-btn a:hover img {
            filter: drop-shadow(0 0 15px var(--neon-pink));
            transform: scale(1.1);
        }

.badge {
    background: #f72585;
    color: white;
    border-radius: 50%;
    padding: 2px 6px;
    font-size: 12px;
    position: absolute;
    top: -5px;
    right: -5px;
}

.header-right a {
    position: relative;
    display: inline-block;
    margin: 0 10px;
}

.notification {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #4cc9f0;
    color: white;
    padding: 15px 25px;
    border-radius: 5px;
    animation: slideIn 0.5s, fadeOut 0.5s 2.5s;
    z-index: 1000;
}

@keyframes slideIn {
    from { transform: translateX(100%); }
    to { transform: translateX(0); }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}  
/* Отключаем стандартное поведение ссылок */
.albom-icons a {
    pointer-events: auto; /* Разрешаем события */
}

/* Анимация для иконок */
.albom-icon {
    transition: transform 0.3s, filter 0.3s;
}

/* Стили для модального окна авторизации */
.auth-modal {
    /* Ваши существующие стили */
    z-index: 10000; /* Убедитесь, что модальное окно поверх всего */
}
/* Остальные стили остаются без изменений */

/* Стили для кнопок */
.albom-icons {
    display: flex;
    gap: 10px;
}

.icon-btn {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
}

.icon-btn img {
    width: 24px;
    height: 24px;
    transition: all 0.3s ease;
}

/* Отключаем стандартные стили для альбомов */
.albom {
    cursor: default;
}

.albom a {
    text-decoration: none;
    color: inherit;
}

    </style>
</head>
<body>
    <header>
        <div class="header-left">
            <h1>KloudDisc</h1>
            <a href="#">Главная</a>
            <a href="#">Магазин</a>
            <a href="#">О нас</a>
        </div>
        <div class="header-center">
            <input type="text" placeholder="Поиск...">
        </div>
<div class="header-right">
    <button id="userProfileBtn" class="profile-btn">
        <img src="img/icon/юзер.png" alt="Профиль">
    </button>
    <a href="#" id="favoritesLink">
        <img src="img/icon/звёздочка.png" alt="Избранное">
        <span id="favoritesCount" class="badge">0</span>
    </a>
    <a href="market.html" id="cartLink">
        <img src="img/icon/магазин.png" alt="Корзина">
        <span id="cartCount" class="badge">0</span>
    </a>
</div>
    </header>

    <!-- Модальное окно авторизации -->
    <div id="authModal" class="auth-modal" style="display: none;">
    <div class="auth-modal-overlay"></div>
    <div class="auth-modal-container">
        <div class="auth-modal-content">
            <button class="auth-close-btn">&times;</button>
            
            <div class="auth-tabs">
                <div class="auth-tab active" data-tab="login">Вход</div>
                <div class="auth-tab" data-tab="register">Регистрация</div>
            </div>
            
            <div class="auth-tab-contents">
                <form id="loginForm" class="auth-tab-content active" action="php/login.php" method="POST">
                    <input type="email" name="email" placeholder="Email" required>
                    <input type="password" name="password" placeholder="Пароль" required>
                    <button type="submit">Войти</button>
                    <div id="loginError" class="auth-error"></div>
                </form>
                
                <form id="registerForm" class="auth-tab-content" action="php/register.php" method="POST">
                    <input type="text" name="name" placeholder="Имя" required>
                    <input type="email" name="email" placeholder="Email" required>
                    <input type="password" name="password" placeholder="Пароль" required>
                    <input type="password" name="confirm_password" placeholder="Повторите пароль" required>
                    <button type="submit">Зарегистрироваться</button>
                    <div id="registerError" class="auth-error"></div>
                </form>
            </div>
        </div>
    </div>
</div>

    <div class="main-content">
        <div class="vinyl-container">
            <div class="vinyl">
                <div class="vinyl-label">KL<br>OUD<br>DISC</div>
            </div>
        </div>
        
        <canvas id="visualizer"></canvas>
        
        <div class="player-controls">
            <button class="control-btn" id="prevButton">⏮</button>
            <button class="control-btn" id="pauseButton">⏸</button>
            <button class="control-btn" id="nextButton">⏭</button>
        </div>
    </div>

    <div class="new-albom">
        <h1>POPULAR ALBOMS</h1>
<div class="albom">
    <img src="img/main-albom/6ZwlCGtYWdI.jpg" alt="" class="alb">
    <div class="albom-icons">
        <button class="icon-btn play-btn" data-action="play">
            <img src="img/icon/плей2.png" alt="Play">
        </button>
        <button class="icon-btn favorite-btn" data-action="favorite">
            <img src="img/icon/звёздочка2.png" alt="Add to favorites">
        </button>
        <button class="icon-btn cart-btn" data-action="cart">
            <img src="img/icon/магазин2.png" alt="Add to cart">
        </button>
    </div>
    <h3>Angel Of Small Death & The Codeine Scene</h3>
    <p>Hozier</p>
</div>

<div class="albom">
    <img src="img/main-albom/_xQdZKn79bE.jpg" alt="" class="alb">
    <div class="albom-icons">
        <button class="icon-btn play-btn" data-action="play">
            <img src="img/icon/плей2.png" alt="Play">
        </button>
        <button class="icon-btn favorite-btn" data-action="favorite">
            <img src="img/icon/звёздочка2.png" alt="Add to favorites">
        </button>
        <button class="icon-btn cart-btn" data-action="cart">
            <img src="img/icon/магазин2.png" alt="Add to cart">
        </button>
    </div>
    <h3>Mercy</h3>
                <p>Dotan</p>
</div>

<div class="albom">
    <img src="img/main-albom/laIqhWYx68g.jpg" alt="" class="alb">
    <div class="albom-icons">
        <button class="icon-btn play-btn" data-action="play">
            <img src="img/icon/плей2.png" alt="Play">
        </button>
        <button class="icon-btn favorite-btn" data-action="favorite">
            <img src="img/icon/звёздочка2.png" alt="Add to favorites">
        </button>
        <button class="icon-btn cart-btn" data-action="cart">
            <img src="img/icon/магазин2.png" alt="Add to cart">
        </button>
    </div>
    <h3>Control</h3>
    <p>Biting Elbows</p>
</div>

<div class="albom">
    <img src="img/main-albom/Mjs9mBpWLmY.jpg" alt="" class="alb">
    <div class="albom-icons">
        <button class="icon-btn play-btn" data-action="play">
            <img src="img/icon/плей2.png" alt="Play">
        </button>
        <button class="icon-btn favorite-btn" data-action="favorite">
            <img src="img/icon/звёздочка2.png" alt="Add to favorites">
        </button>
        <button class="icon-btn cart-btn" data-action="cart">
            <img src="img/icon/магазин2.png" alt="Add to cart">
        </button>
    </div>
        <h3>Melody Maker</h3>
        <p>The Kooks</p>
</div>

<div class="albom">
    <img src="img/main-albom/TIuQVmYDG2E.jpg" alt="" class="alb">
    <div class="albom-icons">
        <button class="icon-btn play-btn" data-action="play">
            <img src="img/icon/плей2.png" alt="Play">
        </button>
        <button class="icon-btn favorite-btn" data-action="favorite">
            <img src="img/icon/звёздочка2.png" alt="Add to favorites">
        </button>
        <button class="icon-btn cart-btn" data-action="cart">
            <img src="img/icon/магазин2.png" alt="Add to cart">
        </button>
    </div>
        <h3>Je te laisserai des mots</h3>
        <p>IRSNa, Paré</p>
</div>

<div class="albom">
    <img src="img/main-albom/troHGFnhBoA.jpg " alt="" class="alb">
    <div class="albom-icons">
        <button class="icon-btn play-btn" data-action="play">
            <img src="img/icon/плей2.png" alt="Play">
        </button>
        <button class="icon-btn favorite-btn" data-action="favorite">
            <img src="img/icon/звёздочка2.png" alt="Add to favorites">
        </button>
        <button class="icon-btn cart-btn" data-action="cart">
            <img src="img/icon/магазин2.png" alt="Add to cart">
        </button>
    </div>
        <h3>Iris</h3>
        <p>Goo Goo Dolls</p>
</div>
</div>

    <div class="event">
        <div class="event-baner">
            <img src="img/djheader3.jpg" alt="">
        </div>
        <div class="event-list">
            <h1>EVENTS</h1>
            
            <div class="event-treck">
                <div class="track-title">BALKAN STATION - TIKETS RELEASE PARTY</div>
                <div class="release-date">25 APRIL | 24.25 YABA</div>
                <img src="img/event/_INhLkLDRpc.jpg" class="event-image" alt="Event Image">
            </div>
            
            <div class="event-treck">
                <div class="track-title">SHEHK - IN-STORE SESSION #70</div>
                <div class="release-date">27 APRIL</div>
                <img src="img/event/mhN0JtcwAn8.jpg" class="event-image" alt="Event Image">
            </div>

            <div class="event-treck">
                <div class="track-title">SHEHK - IN-STORE SESSION #71</div>
                <div class="release-date">30 APRIL</div>
                <img src="img/event/tF8Db-6A4Kg.jpg" class="event-image" alt="Event Image">
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-left">
        <h1>KloudDisc</h1> <br>
        <p>@Сайт создан разработчиком Курило Дамиан</p>
        </div>
        <div class="footer-center">
        <a href="#">Главная</a>
        <a href="#">Магазин</a>
        <a href="#">О нас</a>
        </div>
        <div class="footer-right">
        <a href="#"><img src="img/icon/юзер.png" alt=""></a>
        <a href="#"><img src="img/icon/споти.png" alt=""></a>
        <a href="#"><img src="img/icon/tg.png" alt=""></a>
        <a href="#"><img src="img/icon/vk.png" alt=""></a>
        </div>
    </footer>

    <audio id="audio1" src="mainMusci/IRSNa_Par_-_Je_te_laisserai_des_mots_Slowed_Rain_77885159 (1).mp3"></audio>
    <audio id="audio2" src="mainMusci/Dotan_-_Mercy_72911179.mp3"></audio>
    <audio id="audio3" src="mainMusci/xadisha_Yoshumidzu_-_Tensai_77908427.mp3"></audio>
    <audio id="audio4" src="mainMusci/Genetekk — Till the end [ HARDTEKK ] [BASS BOOSTED] (www.lightaudio.ru).mp3"></audio>

    <script src="js/musicVinil.js"></script>
    <script src="js/auth.js"></script>
   
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Инициализация счетчиков
    updateCounters();
    
    // Обработчики для всех кнопок избранного
    document.querySelectorAll('.albom-icons a:nth-child(2)').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            const album = this.closest('.albom');
            addToFavorites(
                album.querySelector('img').src,
                album.querySelector('h3').textContent,
                album.querySelector('p').textContent
            );
        });
    });
    
    // Обработчики для всех кнопок корзины
    document.querySelectorAll('.albom-icons a:nth-child(3)').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            const album = this.closest('.albom');
            addToCart(
                album.querySelector('img').src,
                album.querySelector('h3').textContent,
                album.querySelector('p').textContent,
                1999 // Здесь можно указать реальную цену
            );
        });
    });
});

// Функция добавления в избранное
function addToFavorites(image, title, artist) {
    if (!isUserLoggedIn()) {
        showAuthModal();
        return;
    }
    
    let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
    
    // Проверяем, нет ли уже этого альбома в избранном
    if (!favorites.some(item => item.image === image)) {
        favorites.push({ image, title, artist });
        localStorage.setItem('favorites', JSON.stringify(favorites));
        updateCounters();
        showNotification('Альбом добавлен в избранное');
    }
}

// Функция добавления в корзину
function addToCart(image, title, artist, price) {
    if (!isUserLoggedIn()) {
        showAuthModal();
        return;
    }
    
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const existingItem = cart.find(item => item.image === image);
    
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({ image, title, artist, price, quantity: 1 });
    }
    
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCounters();
    showNotification('Альбом добавлен в корзину');
}

// Обновление счетчиков в шапке
function updateCounters() {
    const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    
    document.getElementById('favoritesCount').textContent = favorites.length;
    document.getElementById('cartCount').textContent = cart.reduce((total, item) => total + item.quantity, 0);
}

// Проверка авторизации
function isUserLoggedIn() {
    return localStorage.getItem('user') !== null;
}

// Всплывающее уведомление
function showNotification(message) {
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.textContent = message;
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.remove();
    }, 3000);
}

document.addEventListener('DOMContentLoaded', function() {
    // Обработчики для избранного (звездочка)
    document.querySelectorAll('.favorite-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation(); // Предотвращаем всплытие
            
            const album = this.closest('.albom');
            addToFavorites(
                album.querySelector('img').src,
                album.querySelector('h3').textContent,
                album.querySelector('p').textContent
            );
        });
    });
    
    // Обработчики для корзины (магазин)
    document.querySelectorAll('.cart-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation(); // Предотвращаем всплытие
            
            const album = this.closest('.albom');
            addToCart(
                album.querySelector('img').src,
                album.querySelector('h3').textContent,
                album.querySelector('p').textContent,
                1999 // Укажите реальную цену
            );
        });
    });
    
    // Обработчик для предотвращения скролла при клике на ссылки
    document.querySelectorAll('.albom-icons a').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
        });
    });
});

// Функция добавления в избранное
function addToFavorites(image, title, artist) {
    if (!isUserLoggedIn()) {
        showAuthModal();
        return;
    }
    
    let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
    
    if (!favorites.some(item => item.image === image)) {
        favorites.push({ image, title, artist });
        localStorage.setItem('favorites', JSON.stringify(favorites));
        updateCounters();
        showNotification('Альбом добавлен в избранное');
        
        // Анимация иконки
        animateIcon(this.querySelector('img'), 'favorite');
    }
}

// Функция добавления в корзину
function addToCart(image, title, artist, price) {
    if (!isUserLoggedIn()) {
        showAuthModal();
        return;
    }
    
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const existingItem = cart.find(item => item.image === image);
    
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({ image, title, artist, price, quantity: 1 });
    }
    
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCounters();
    showNotification('Альбом добавлен в корзину');
    
    // Анимация иконки
    animateIcon(this.querySelector('img'), 'cart');
}
document.addEventListener('DOMContentLoaded', function() {
    // Единый обработчик для всех кнопок
    document.querySelectorAll('.albom').forEach(album => {
        const albumData = {
            image: album.querySelector('img').src,
            title: album.querySelector('h3').textContent,
            artist: album.querySelector('p').textContent,
            price: 1999 // Укажите реальную цену
        };
        
        album.querySelectorAll('.icon-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const action = this.getAttribute('data-action');
                
                switch(action) {
                    case 'play':
                        playAlbum(albumData);
                        break;
                    case 'favorite':
                        addToFavorites(albumData);
                        break;
                    case 'cart':
                        addToCart(albumData);
                        break;
                }
            });
        });
    });
});

// Функция воспроизведения
function playAlbum(album) {
    console.log('Playing:', album.title);
    // Ваш код для воспроизведения
}

// Функция добавления в избранное
function addToFavorites(album) {
    if (!isUserLoggedIn()) {
        showAuthModal();
        return;
    }
    
    let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
    
    if (!favorites.some(item => item.image === album.image)) {
        favorites.push(album);
        localStorage.setItem('favorites', JSON.stringify(favorites));
        updateCounters();
        showNotification(`"${album.title}" добавлен в избранное`);
        animateIcon(this, 'favorite');
    } else {
        showNotification('Этот альбом уже в избранном');
    }
}

// Функция добавления в корзину
function addToCart(album) {
    if (!isUserLoggedIn()) {
        showAuthModal();
        return;
    }
    
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const existingItem = cart.find(item => item.image === album.image);
    
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({...album, quantity: 1});
    }
    
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCounters();
    showNotification(`"${album.title}" добавлен в корзину`);
    animateIcon(this, 'cart');
}

// Проверка авторизации
function isUserLoggedIn() {
    return localStorage.getItem('user') !== null;
}

// Анимация иконки
function animateIcon(btn, type) {
    const icon = btn.querySelector('img');
    icon.style.transform = 'scale(1.3)';
    icon.style.transition = 'transform 0.3s';
    
    if (type === 'favorite') {
        icon.style.filter = 'brightness(1.2) drop-shadow(0 0 8px rgba(255, 215, 0, 0.7))';
    } else {
        icon.style.filter = 'brightness(1.2) drop-shadow(0 0 8px rgba(76, 201, 240, 0.7))';
    }
    
    setTimeout(() => {
        icon.style.transform = 'scale(1)';
        icon.style.filter = 'none';
    }, 300);
}

// Анимация иконки при добавлении
function animateIcon(icon, type) {
    icon.style.transform = 'scale(1.5)';
    icon.style.transition = 'transform 0.3s';
    
    if (type === 'favorite') {
        icon.style.filter = 'brightness(1.5) drop-shadow(0 0 5px gold)';
    } else {
        icon.style.filter = 'brightness(1.5) drop-shadow(0 0 5px #4cc9f0)';
    }
    
    setTimeout(() => {
        icon.style.transform = 'scale(1)';
        icon.style.filter = 'none';
    }, 300);
}
</script>
</body>
</html>
